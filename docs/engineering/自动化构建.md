# 自动化构建

[**Npm Scripts**](https://docs.npmjs.com/cli/v6/using-npm/scripts) 是实现自动化构建工作流最简单的方式。npm 允许在 package.json 文件里面，使用 scripts 字段定义脚本命令。具体使用细节可以参考[npm scripts 使用指南](https://www.ruanyifeng.com/blog/2016/10/npm_scripts.html)

但是如果构建较大型的项目，实现复杂的功能，**Npm Script**的功能就显得有点吃力，可以借助一些自动化构建工具，如 Grunt，Gulp 和 FIS 等

> 注： 这里自动化构建工具没有 webpack，因为 webpack 和 rollup.js 这种 本质上是一个模块打包器

## Grunt

Grunt 是老牌的构建工具，特点是配置驱动，需要做的就是了解各种插件的功能，然后把配置整合到 Gruntfile.js 中

Grunt 缺点也是配置驱动，当任务非常多的情况下，试图用配置完成所有事简直就是个灾难；再就是它的 I/O 操作也是个弊病，它的每一次任务都需要从磁盘中读取文件，处理完后再写入到磁盘，例如：我想对多个 less 进行预编译、压缩操作，那么 Grunt 的操作就是：

> 读取 less 文件 -> 编译成 css -> 存储到磁盘 -> 读取 css -> 压缩处理 -> 存储到磁盘

这样一来当资源文件较多，任务较复杂的时候性能就是个问题了。

## Glup

Glup 是目前市面上最流行的自动化构建系统。Gulp 特点是代码驱动，写任务就和写普通的 Node.js 代码一样。

对文件读取是流式操作（Stream），也就是说一次 I/O 可以处理多个任务，还是 less 的例子，Gulp 的流程就是：

> 读取 less 文件 -> 编译成 css -> 压缩处理 -> 存储到磁盘

Gulp 作为任务类型的工具没有明显的缺点，唯一的问题可能就是完成相同的任务它需要写的代码更多一些，所以除非是项目有历史包袱（原有项目就是基于 Grunt 构建）在 Grunt 与 Gulp 对比看来还是比较推荐 Gulp。
