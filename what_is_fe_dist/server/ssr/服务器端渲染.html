<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>服务器端渲染 | What is FE</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="构建自己的系统的 Web 前端知识体系">
    
    <link rel="preload" href="/assets/css/0.styles.41761744.css" as="style"><link rel="preload" href="/assets/js/app.927571f1.js" as="script"><link rel="preload" href="/assets/js/2.5e2d37c1.js" as="script"><link rel="preload" href="/assets/js/50.f32a679a.js" as="script"><link rel="preload" href="/assets/js/3.b304fdc1.js" as="script"><link rel="prefetch" href="/assets/js/10.a401a71a.js"><link rel="prefetch" href="/assets/js/11.96ae7375.js"><link rel="prefetch" href="/assets/js/12.0a7a6753.js"><link rel="prefetch" href="/assets/js/13.140ccde6.js"><link rel="prefetch" href="/assets/js/14.ac994c41.js"><link rel="prefetch" href="/assets/js/15.57e3ed86.js"><link rel="prefetch" href="/assets/js/16.8d7bee9a.js"><link rel="prefetch" href="/assets/js/17.81c8a830.js"><link rel="prefetch" href="/assets/js/18.54e9277b.js"><link rel="prefetch" href="/assets/js/19.8bcf4bae.js"><link rel="prefetch" href="/assets/js/20.c00287b5.js"><link rel="prefetch" href="/assets/js/21.56a2417a.js"><link rel="prefetch" href="/assets/js/22.243df880.js"><link rel="prefetch" href="/assets/js/23.d40c856d.js"><link rel="prefetch" href="/assets/js/24.45f156a5.js"><link rel="prefetch" href="/assets/js/25.9b1760a8.js"><link rel="prefetch" href="/assets/js/26.63f1240b.js"><link rel="prefetch" href="/assets/js/27.cc0a145e.js"><link rel="prefetch" href="/assets/js/28.b28161f7.js"><link rel="prefetch" href="/assets/js/29.675ec096.js"><link rel="prefetch" href="/assets/js/30.75e3ebcc.js"><link rel="prefetch" href="/assets/js/31.3fc139e1.js"><link rel="prefetch" href="/assets/js/32.c34bb52a.js"><link rel="prefetch" href="/assets/js/33.0b87977c.js"><link rel="prefetch" href="/assets/js/34.1cf07cde.js"><link rel="prefetch" href="/assets/js/35.cb0534fa.js"><link rel="prefetch" href="/assets/js/36.f258aa1a.js"><link rel="prefetch" href="/assets/js/37.632f0d73.js"><link rel="prefetch" href="/assets/js/38.719463ce.js"><link rel="prefetch" href="/assets/js/39.75d6f9fb.js"><link rel="prefetch" href="/assets/js/4.81323806.js"><link rel="prefetch" href="/assets/js/40.1e6e3def.js"><link rel="prefetch" href="/assets/js/41.63699105.js"><link rel="prefetch" href="/assets/js/42.cf81f6df.js"><link rel="prefetch" href="/assets/js/43.7ab2b5ce.js"><link rel="prefetch" href="/assets/js/44.6fec32b2.js"><link rel="prefetch" href="/assets/js/45.a828d105.js"><link rel="prefetch" href="/assets/js/46.d104d659.js"><link rel="prefetch" href="/assets/js/47.c484b09e.js"><link rel="prefetch" href="/assets/js/48.6ad68798.js"><link rel="prefetch" href="/assets/js/49.525c505d.js"><link rel="prefetch" href="/assets/js/5.a6acc31c.js"><link rel="prefetch" href="/assets/js/51.8580302e.js"><link rel="prefetch" href="/assets/js/52.83cbb350.js"><link rel="prefetch" href="/assets/js/53.cce64426.js"><link rel="prefetch" href="/assets/js/54.46837dde.js"><link rel="prefetch" href="/assets/js/55.f7051e0d.js"><link rel="prefetch" href="/assets/js/56.736dd2b9.js"><link rel="prefetch" href="/assets/js/57.d7e21419.js"><link rel="prefetch" href="/assets/js/58.6b2009c8.js"><link rel="prefetch" href="/assets/js/59.23c7559d.js"><link rel="prefetch" href="/assets/js/6.56200eb6.js"><link rel="prefetch" href="/assets/js/60.dafa9417.js"><link rel="prefetch" href="/assets/js/61.4755c5fc.js"><link rel="prefetch" href="/assets/js/62.fafc054a.js"><link rel="prefetch" href="/assets/js/63.2a34d189.js"><link rel="prefetch" href="/assets/js/64.ba30b4c2.js"><link rel="prefetch" href="/assets/js/65.a87305d1.js"><link rel="prefetch" href="/assets/js/66.95c7e849.js"><link rel="prefetch" href="/assets/js/67.dc056882.js"><link rel="prefetch" href="/assets/js/68.871085c4.js"><link rel="prefetch" href="/assets/js/69.cd3f3c82.js"><link rel="prefetch" href="/assets/js/7.ab8ffd39.js"><link rel="prefetch" href="/assets/js/70.f5a70a00.js"><link rel="prefetch" href="/assets/js/71.2dba49af.js"><link rel="prefetch" href="/assets/js/72.a56ab892.js"><link rel="prefetch" href="/assets/js/8.4f4bb732.js"><link rel="prefetch" href="/assets/js/9.42f33289.js">
    <link rel="stylesheet" href="/assets/css/0.styles.41761744.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">What is FE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming-basics/编程模式/函数式编程.html" class="nav-link">
  编程基础
</a></div><div class="nav-item"><a href="/syntax&amp;API/HTML/关于HTML.html" class="nav-link">
  语法和API
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  网络和通讯
</a></div><div class="nav-item"><a href="/development-process/Git/git命令.html" class="nav-link">
  开发流程
</a></div><div class="nav-item"><a href="/engineering/webpack/webpack基础学习.html" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/runnnig-monitoring/安全/CSRF.html" class="nav-link">
  运行与监控
</a></div><div class="nav-item"><a href="/framework/React/关于react-hook.html" class="nav-link">
  前端框架
</a></div><div class="nav-item"><a href="/tool&amp;plugin/cross-env/关于cross-env.html" class="nav-link">
  常用工具与插件
</a></div><div class="nav-item"><a href="/server/ssr/服务器端渲染.html" class="nav-link">
  服务器端
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  技术广度
</a></div><div class="nav-item"><a href="https://github.com/licop/What_is_FE" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming-basics/编程模式/函数式编程.html" class="nav-link">
  编程基础
</a></div><div class="nav-item"><a href="/syntax&amp;API/HTML/关于HTML.html" class="nav-link">
  语法和API
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  网络和通讯
</a></div><div class="nav-item"><a href="/development-process/Git/git命令.html" class="nav-link">
  开发流程
</a></div><div class="nav-item"><a href="/engineering/webpack/webpack基础学习.html" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/runnnig-monitoring/安全/CSRF.html" class="nav-link">
  运行与监控
</a></div><div class="nav-item"><a href="/framework/React/关于react-hook.html" class="nav-link">
  前端框架
</a></div><div class="nav-item"><a href="/tool&amp;plugin/cross-env/关于cross-env.html" class="nav-link">
  常用工具与插件
</a></div><div class="nav-item"><a href="/server/ssr/服务器端渲染.html" class="nav-link">
  服务器端
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  技术广度
</a></div><div class="nav-item"><a href="https://github.com/licop/What_is_FE" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ssr</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/server/ssr/服务器端渲染.html" class="active sidebar-link">服务器端渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/ssr/服务器端渲染.html#什么是渲染" class="sidebar-link">什么是渲染</a></li><li class="sidebar-sub-header"><a href="/server/ssr/服务器端渲染.html#传统的服务端渲染" class="sidebar-link">传统的服务端渲染</a></li><li class="sidebar-sub-header"><a href="/server/ssr/服务器端渲染.html#客户端渲染" class="sidebar-link">客户端渲染</a></li><li class="sidebar-sub-header"><a href="/server/ssr/服务器端渲染.html#现代化的服务端渲染-ssr" class="sidebar-link">现代化的服务端渲染(ssr)</a></li></ul></li><li><a href="/server/ssr/关于 Nuxtjs.html" class="sidebar-link">关于 Nuxtjs</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="服务器端渲染"><a href="#服务器端渲染" class="header-anchor">#</a> 服务器端渲染</h1> <p>随着前端技术栈和工具链的迭代成熟，前端工程化、模块化也已成为了当下的主流技术方案，在这波前 端技术浪潮中，涌现了诸如 React、Vue、Angular 等基于客户端渲染的前端框架，这类框架所构建的 单页应用(SPA)具有用户体验好、渲染性能好、可维护性高等优点。但也也有一些很大的缺陷，其中 主要涉及到以下两点:</p> <ol><li>首屏加载时间过长</li> <li>不利于 SEO</li></ol> <p>为了解决这两个缺陷，业界借鉴了传统的服务端直出 HTML 方案，提出在服务器端执行前端框架 (React/Vue/Angular)代码生成网页内容，然后将渲染好的网页内容返回给客户端，客户端只需要负责展示就可以了;</p> <p>当然不仅仅如此，为了获得更好的用户体验，同时会在客户端将来自服务端渲染的内容激活为一个 SPA 应用，也就是说之后的页面内容交互都是通过客户端渲染处理。</p> <p>这种方式简而言之就是:</p> <ul><li>通过服务端渲染首屏直出，解决首屏渲染慢以及不利于 SEO 问题</li> <li>通过客户端渲染接管页面内容交互得到更好的用户体验</li></ul> <p>这种方式我们通常称之为现代化的<strong>服务端渲染</strong>，也叫<strong>同构渲染</strong>，所谓的同构指的就是服务端构建渲染 + 客户端构建渲染。同理，这种方式构建的应用称之为服务端渲染应用或者是同构应用。</p> <p>为了更好的理解服务端渲染应用，这里需要了解一些渲染相关概念，这些概念主要涉及到以下几点:</p> <ul><li>什么是渲染</li> <li>传统的服务端渲染</li> <li>客户端渲染</li> <li>现代化的服务端渲染(同构渲染)</li></ul> <h2 id="什么是渲染"><a href="#什么是渲染" class="header-anchor">#</a> 什么是渲染</h2> <p>这里所说的渲染指的是把 <strong>数据 + 模板拼接</strong> 到一起的这个事儿。
例如对于我们前端开发者来说最常见的一种场景就是:请求后端接口数据，然后将数据通过模板绑定语法绑定到页面中，最终呈现给用户。这个过程就是我们这里所指的<strong>渲染</strong>。
渲染本质其实就是字符串的解析替换，实现方式有很多种;但是我们这里要关注的并不是如何渲染，而是在哪里渲染的问题?</p> <h2 id="传统的服务端渲染"><a href="#传统的服务端渲染" class="header-anchor">#</a> 传统的服务端渲染</h2> <p>最早期，Web 页面渲染都是在服务端完成的，即服务端运行过程中将所需的数据结合页面模板渲染为 HTML，响应给客户端浏览器。所以浏览器呈现出来的是直接包含内容的页面。</p> <p>工作流程:</p> <p><img src="/server/traditional_ssr.png" alt=""></p> <p>这种方式的代表性技术有:ASP、PHP、JSP，再到后来的一些相对高级一点的服务端框架配合一些模板引擎。</p> <p>下面通过 nodejs 模拟这个流程:</p> <p>服务端代码: 基本的 Web 服务、 使用模板引擎渲染一个页面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> template <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;art-template&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 获取页面模板</span>
  <span class="token keyword">const</span> templateStr <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 2. 获取数据</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./data.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 3. 渲染：数据 + 模板 = 最终结果</span>
  <span class="token keyword">const</span> html <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>templateStr<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 4. 把渲染结果发送给客户端</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/about&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./about.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;running...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>index.html</code>模板代码</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>传统的服务端渲染<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>传统的服务端渲染<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      {{ each posts }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{{ $value.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      {{ /each }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="https://github.com/licop/What_is_FE/tree/master/examples/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93/traditional-ssr" target="_blank" rel="noopener noreferrer">源码参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>这也就是最早的网页渲染方式，也就是动态网站的核心工作步骤。在这样的一个工作过程中，因为页面中的内容不是固定的，它有一些动态的内容。
在今天看来，因为在当下这种网页越来越复杂的情况下，这种模式存在很多明显的不足:</p> <ul><li>应用的前后端部分完全耦合在一起，在前后端协同开发方面会有非常大的阻力;</li> <li>前端没有足够的发挥空间，无法充分利用现在前端生态下的一些更优秀的方案;</li> <li>由于内容都是在服务端动态生成的，所以服务端的压力较大;</li> <li>相比目前流行的 SPA 应用来说，打开新的路由要刷新，用户体验一般;</li></ul> <p>但是不得不说，在网页应用并不复杂的情况下，这种方式也是可取的。</p> <h2 id="客户端渲染"><a href="#客户端渲染" class="header-anchor">#</a> 客户端渲染</h2> <p>传统的服务端渲染有很多问题，但是这些问题随着客户端 Ajax 技术的普及得到了有效的解决，Ajax 技术可以使得客户端动态获取数据变为可能，也就是说原本服务端渲染这件事儿也可以拿到客户端做了。</p> <p>下面是基于客户端渲染的 SPA 应用的基本工作流程。</p> <p><img src="/server/csr.png" alt=""></p> <p>目前来说我们使用<code>create-react-app</code>和<code>vue-cli</code>创建大部分单页面应用都是客户端渲染的。</p> <p>可以把【数据处理】和【页码渲染】这两件事儿分开了，也就是【后端】负责数据处理，【前端】负责页面渲染，这种分离模式极大的提高了开发效率和可维护性。
而且这样一来，【前端】更为独立，也不再受限制于【后端】，它可以选择任意的技术方案或框架来处理页面渲染。</p> <p>但是这种模式下，也会存在一些明显的不足，其中最主要的就是:</p> <ul><li><strong>首屏渲染慢</strong>:因为 HTML 中没有内容，必须等到 <em>JavaScript 加载</em> 和 <em>AJAX 请求动态数据</em> 并执行完成才能呈现页面内容。</li> <li><strong>SEO 问题</strong>: 同样因为 HTML 中没有内容，所以对于目前的搜索引擎爬虫来说，页面中没有任何有用的信息，自然无法提取关键词进行索引了，因为搜索引擎只会查找现成的内容，不会帮你跑 JS 代码。尤其单页面应用程序 SEO 几乎为零，因为所有的内容都是通过客户端 JS 生成。</li></ul> <h2 id="现代化的服务端渲染-ssr"><a href="#现代化的服务端渲染-ssr" class="header-anchor">#</a> 现代化的服务端渲染(ssr)</h2> <p>对于客户端渲染的 SPA 应用的问题有没有解决方案呢? 服务端渲染，严格来说是现代化的服务端渲染，也叫<strong>同构渲染</strong>。</p> <p>基于 React，Vue 等框架，客户端渲染和服务器端渲染的结合</p> <ul><li>在服务器端执行一次，用于实现服务器端渲染（首屏直出），首次加载可以获取 HTML 的页面数据</li> <li>在客户端执行一次，用于接管页面交互，可以实现单页面应用(SPA)的效果，提升用户体验</li></ul> <p>核心解决 SEO 和首屏渲染慢的问题，拥有传统服务端的优点，也有客户端渲染的优点。</p> <p>同构渲染工作流程</p> <p><img src="/server/ssr.png" alt=""></p> <ol><li>客户端发起请求</li> <li>服务端渲染首屏内容 + 生成客户端 SPA 相关资源</li> <li>服务端将生成的首屏资源发送给客户端</li> <li>客户端直接展示服务端渲染好的首屏内容</li> <li>首屏中的 SPA 相关资源执行之后会激活客户端 Vue/React</li> <li>之后客户端所有的交互都由客户端 SPA 处理</li></ol> <p><strong>isomorphic web apps(同构应用)</strong>:，基于 react、vue 框架，客户端渲染和服务器端渲染的结合，在服务器端执行一次，用于实现服务器端渲染(首屏直出)，在客户端再执行一次，用于接管页面交互，核心解决 SEO 和首屏渲染慢的问题。</p> <p>Next.js/Nuxt.js 分别是基于 React/Vue.js 生态开发的一个第三方服务端渲染框架，通过它我们可以轻松构建现代化的服务端渲染应用。</p> <p><strong>同构渲染优缺点</strong>:</p> <ul><li>优点:首屏渲染速度快、有利于 SEO、提升交互体验</li> <li>缺点:
<ul><li>开发成本高。 涉及构建设置和部署的更多要求。与可以部署在任何静态文件服务器上的完全静态单页面应用程序 (SPA) 不同，服务器渲染应用程序，需要处于 Node.js server 运行环境。</li> <li>更多的服务器端负载。在 Node.js 中渲染完整的应用程序，显然会比仅仅提供静态文件的 server 更加大量占用 CPU 资源 (CPU-intensive - CPU 密集)，因此如果你预料在高流量环境 (high traffic) 下使用，请准备相应的服务器负载，并明智地采用缓存策略。</li></ul></li></ul> <p>在对你的应用程序使用<strong>服务器端渲染 (SSR)</strong> 之前，你应该问的第一个问题是，是否真的需要它。这主要取决于<strong>内容到达时间 (time-to-content)</strong> 对应用程序的重要程度。例如，如果你正在构建一个内部仪表盘，初始加载时的额外几百毫秒并不重要，这种情况下去使用服务器端渲染 (SSR) 将是小题大作。然而，内容到达时间 (time-to-content) 要求是绝对关键的指标，在这种情况下，服务器端渲染 (SSR) 可以帮助你实现最佳的初始加载性能。</p> <p>事实上，很多网站是出于效益的考虑才启用服务端渲染，性能倒是在其次。 假设 A 网站页面中有一个关键字叫“前端性能优化”，这个关键字是 JS 代码跑过一遍后添加到 HTML 页面中的。那么客户端渲染模式下，我们在搜索引擎搜索这个关键字，是找不到 A 网站的——搜索引擎只会查找现成的内容，不会帮你跑 JS 代码。A 网站的运营方见此情形，感到很头大:搜索引擎搜不出来，用户找不到我们，谁还会用 我的网站呢?为了把“现成的内容”拿给搜索引擎看，A 网站不得不启用服务端渲染。 但性能在其次，不 代表性能不重要。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/server/ssr/关于 Nuxtjs.html">
        关于 Nuxtjs
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.927571f1.js" defer></script><script src="/assets/js/2.5e2d37c1.js" defer></script><script src="/assets/js/50.f32a679a.js" defer></script><script src="/assets/js/3.b304fdc1.js" defer></script>
  </body>
</html>
