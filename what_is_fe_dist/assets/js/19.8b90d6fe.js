(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{386:function(r,l,e){"use strict";e.r(l);var t=e(27),o=Object(t.a)({},(function(){var r=this,l=r.$createElement,e=r._self._c||l;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("h1",{attrs:{id:"rollup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rollup"}},[r._v("#")]),r._v(" rollup")]),r._v(" "),e("p",[r._v("与功能繁杂大而全的 webpack 相比，rollup 是一个小而美 ESM 的打包器。rollup 并不是为了与 webpack 全面竞争，而是提供一个充分利用 ESM 各项特性的高效打包器。")]),r._v(" "),e("p",[r._v("相比于 webpack 的打包结果有大量的引导代码和模块函数，rollup 的打包结果十分简洁，依然完全可读，同时 rollup 会自动开启 tree shaking 对为引用的部分不会打包，tree shaking 最早也是在 rollup 中提出的。")]),r._v(" "),e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[r._v("#")]),r._v(" 配置")]),r._v(" "),e("p",[r._v("插件是 rollup 唯一的扩展途径")]),r._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[r._v("// rollup.config.js文件\nimport json from 'rollup-plugin-json'\nimport resolve from 'rollup-plugin-node-resolve'\nimport commonjs from 'rollup-plugin-commonjs'\nimport sourceMaps from 'rollup-plugin-sourcemaps\n\nexport default {\n  input: 'src/index.js',\n  output: {\n    file: 'dist/bundle.js',\n    format: 'iife' // 指定输出格式\n  },\n  watch: {\n    include: 'src/**'\n  },\n  plugins: [\n    // Allow json resolution\n    json()\n    // Allow bundling cjs modules (unlike webpack, rollup doesn't understand cjs)\n    commonjs(),\n    // Allow node_modules resolution, so you can use 'external' to control\n    // which external modules to include in the bundle\n    // https://github.com/rollup/rollup-plugin-node-resolve#usage\n    resolve(),\n    // Resolve source maps to the original source\n    sourceMaps()\n  ]\n}\n\n")])])]),e("h2",{attrs:{id:"rollup-选用原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rollup-选用原则"}},[r._v("#")]),r._v(" rollup 选用原则")]),r._v(" "),e("h3",{attrs:{id:"优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[r._v("#")]),r._v(" 优点")]),r._v(" "),e("ul",[e("li",[r._v("配置简单，输出结果更加扁平")]),r._v(" "),e("li",[r._v("自动使用 tree shaking 移除未引用代码")]),r._v(" "),e("li",[r._v("打包结果依然完全可读")])]),r._v(" "),e("h3",{attrs:{id:"缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[r._v("#")]),r._v(" 缺点")]),r._v(" "),e("ul",[e("li",[r._v("加载非 ESM 的第三方模块比较复杂")]),r._v(" "),e("li",[r._v("模块最终都被打包到一个函数中，无法实现 HMR")]),r._v(" "),e("li",[r._v("在浏览器环境中，代码拆分功能依赖 AMD 库")])]),r._v(" "),e("h3",{attrs:{id:"选用原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选用原则"}},[r._v("#")]),r._v(" 选用原则")]),r._v(" "),e("p",[r._v("如果我们在开发一个"),e("strong",[r._v("应用程序")]),r._v("面临引入大量第三方模块的需求推荐使用 webpack")]),r._v(" "),e("p",[r._v("如果我们正在开发 javascript 的框架或类库推荐使用 rollup，如 react 和 vue 目前都在使用 rollup")]),r._v(" "),e("h2",{attrs:{id:"更多参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更多参考"}},[r._v("#")]),r._v(" 更多参考")]),r._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://rollupjs.org/guide/en/",target:"_blank",rel:"noopener noreferrer"}},[r._v("rollup.js"),e("OutboundLink")],1)]),r._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/licop/What_is_FE/tree/master/examples/rollup-demo",target:"_blank",rel:"noopener noreferrer"}},[r._v("rollup demo"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);l.default=o.exports}}]);